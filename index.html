<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ParrotSoft ParrotOS Installer</title>
<style>
:root{
  --blue-700:#0078D7;
  --blue-800:#005a9e;
  --card-bg:rgba(255,255,255,0.85);
  --accent:#00BFFF;
  --glass: rgba(247, 213, 213, 0.192);
}

/* basic */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Segoe UI",Tahoma,Arial;}
body{
  display:flex;align-items:center;justify-content:center;
  background: url('data/parrotOS fone.png') center/cover no-repeat;
  position:relative;
}
body::after{
  content:''; position:absolute; inset:0;
  background: rgba(0, 0, 0, 0.062);
  z-index:0;
}
.frame{
  width:880px; max-width:96%; border-radius:14px; overflow:visible; position:relative; 
  box-shadow:0 30px 60px rgba(0,0,0,0.45); z-index:1;
  transition:all 0.32s ease-in-out;
  background:var(--glass);
  backdrop-filter: blur(8px);
}
.frame.fullscreen{
  width:90vw; height:90vh;
}

/* fullscreen button */
.fullscreenBtn{
  position:absolute; top:18px; right:18px;
  background:var(--blue-700); color:#fff;
  padding:8px 14px; border-radius:10px; cursor:pointer;
  font-weight:700; display:inline-flex; align-items:center; gap:6px;
  box-shadow:0 8px 20px rgba(0,0,0,0.25);
  transition:transform .12s, background .12s;
  z-index:2;
}
.fullscreenBtn:hover{ background:var(--blue-800); transform:translateY(-2px); }

/* appbar */
.appbar{
  display:flex;align-items:center;gap:12px;padding:16px 18px;
  border-top-left-radius:14px;border-top-right-radius:14px;
  background:linear-gradient(180deg,var(--blue-700),#0067b3); color:#fff; position:relative; z-index:2;
}
.appbar img.logo{ width:34px; height:34px; border-radius:6px; background:#fff; padding:4px }
.appbar h1{ margin:0;font-size:18px;font-weight:600; }
.appbar .tag{ margin-left:auto; font-size:13px; opacity:.9; background:rgb(255, 255, 255); padding:6px 10px; border-radius:8px; }

/* content */
.content{ background:transparent;padding:120px; position:relative; z-index:2; }

/* icon grid */
#mainPage{ display:flex; gap:16px; flex-wrap:wrap; align-items:flex-start; }
.icon-card{
  width:190px; height:160px;
  background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(250,250,250,0.85));
  border-radius:12px; padding:12px;
  box-shadow:0 8px 20px rgba(2,6,23,0.12);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  cursor:pointer; transition:transform .22s, box-shadow .22s; position:relative;
  backdrop-filter: blur(6px);
}
.icon-card:hover{ transform:translateY(-8px) scale(1.03); box-shadow:0 22px 46px rgba(2,6,23,0.18); }
.icon-card img{ width:62px;height:62px; display:block; margin-bottom:8px; }
.icon-card .title{ font-weight:700; font-size:14px; color:#111; text-align:center; }

/* tooltip */
.icon-card .tooltip {
  position:absolute; left:50%; transform:translateX(-50%) translateY(8px); bottom:-8px;
  min-width:180px; max-width:240px; padding:8px 10px; border-radius:8px;
  background:rgba(10,10,10,0.9); color:#fff; font-size:13px;
  opacity:0; pointer-events:none; transition:opacity .18s, transform .18s;
  box-shadow:0 6px 20px rgba(0,0,0,0.35);
}
.icon-card:hover .tooltip{ opacity:1; transform:translateX(-50%) translateY(18px); }

/* overlay install panel */
#installOverlay{
  position:absolute; inset:20px; border-radius:12px; background:var(--card-bg);
  box-shadow:0 14px 44px rgba(0,0,0,0.36); padding:22px; display:flex; flex-direction:column; gap:14px;
  transform-origin:top center; transform:translateY(16px) scale(.98); opacity:0;
  pointer-events:none; transition: transform .32s cubic-bezier(.2,.9,.3,1), opacity .22s;
  z-index:30; backdrop-filter: blur(8px);
}
#installOverlay.show{ transform:translateY(0) scale(1); opacity:1; pointer-events:auto; }

/* back button */
.backBtn{ position:absolute; top:18px; left:18px; background:var(--blue-700); color:#fff;
  padding:8px 14px; border-radius:10px; cursor:pointer;
  font-weight:700; display:inline-flex; gap:10px; align-items:center;
  box-shadow:0 8px 20px rgba(0,0,0,0.25); transition:transform .12s, background .12s;}
.backBtn svg{ width:16px;height:16px; transform:translateX(-2px); }
.backBtn:hover{ transform:translateY(-3px); background:var(--blue-800); }

/* install layout */
.installHeader{ text-align:center; font-size:20px; font-weight:800; color:#111; margin-top:6px; }
.installBody{ display:flex; gap:16px; align-items:flex-start; margin-top:6px; }
.leftCol{ width:320px; background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(246,248,251,0.95));
  border-radius:10px; padding:12px; box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);backdrop-filter:blur(4px);}
.leftCol h3{ margin:0 0 8px 0; font-size:14px; color:#222; }
.metaRow{ font-size:13px; color:#444; margin-bottom:8px; }
.type-selection{ display:flex; gap:8px; margin-top:6px; }
.type-selection label{ background:transparent; border-radius:8px; padding:8px 10px; cursor:pointer; border:1px solid rgba(0,0,0,0.06); }
.type-selection label:hover{ background:rgba(0,120,215,0.06); }
.type-selection input{ display:none; }
.type-selection input:checked + span{ background:var(--blue-700); color:#fff; padding:6px 10px; border-radius:6px; }

/* right column */
.rightCol{ flex:1; display:flex; flex-direction:column; gap:10px; }
.downloadBtn{ align-self:flex-start; padding:10px 16px; border-radius:8px; background:var(--blue-700); color:#fff; border:none; cursor:pointer; font-weight:800; box-shadow:0 10px 26px rgba(0,0,0,0.14); transition:transform .12s; }
.downloadBtn:hover{ transform:translateY(-4px); background:var(--blue-800); }

/* progress */
.progressWrap{ margin-top:10px; width:100%; }
.progressBar{ height:18px; width:100%; border-radius:999px; background:#e9f2fb; overflow:hidden; display:none; }
.progressBar.active{ display:block; }
.progressBar .bar{ height:100%; width:0%; background:linear-gradient(90deg,var(--accent),#0090d1); display:flex; align-items:center; justify-content:center; font-weight:700; color:#042; font-size:12px; transition:width .18s linear; }

/* small notes */
.muted{ color:#666; font-size:13px; }
.footerNote{ font-size:12px; color:#6b6b6b; margin-top:10px; }

/* responsive */
@media (max-width:900px){
  .installBody{ flex-direction:column; }
  .leftCol{ width:100%; }
}
</style>
</head>
<body>
<div class="frame" role="application" aria-label="ParrotOS installer">
  <div class="appbar">
    <img class="logo" src="data/ico.png" alt="Parrot logo" />
    <h1>ParrotSoft ¬∑ ParrotOS</h1>
    <div class="tag">Download Center</div>
  </div>

  <button class="fullscreenBtn" id="fullscreenBtn">üñ•Ô∏è –†–∞—Å—Ç—è–Ω—É—Ç—å</button>

  <div class="content">
    <!-- MAIN PAGE -->
    <div id="mainPage" aria-hidden="false">
      <div class="icon-card" data-version="alfa-0.1" data-type="POSK" tabindex="0" role="button" aria-pressed="false">
        <img src="/data/ico.png" alt="desktop" />
        <div class="title">ParrotOS alfa 0.1 <div class="muted">Desktop</div></div>
        <div class="tooltip">Stable desktop build ‚Äî full GUI, recommended for most users.</div>
      </div>

    <!-- INSTALL PANEL -->
    <div id="installOverlay" aria-hidden="true">
      <div class="backBtn" id="backBtn" role="button" aria-label="Back">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        Back
      </div>

      <div class="installHeader" id="installTitle">Installing ParrotOS</div>

      <div class="installBody">
        <div class="leftCol" aria-hidden="false">
          <h3>Selected</h3>
          <div class="metaRow"><strong id="selVersion">ParrotOS 1.0</strong> ¬∑ <span id="selType" class="muted">desktop</span></div>
          <div class="muted">Description:</div>
          <div id="selDesc" style="margin-top:8px;">Stable desktop build ‚Äî recommended for most users.</div>

          <h3 style="margin-top:14px;">Choose ISO type</h3>
          <div class="type-selection" id="typeSelection">
            <label><input type="radio" name="isoType" value="POSK" checked><span>Kernal POSK</span></label>
          </div>
        </div>

        <div class="rightCol">
          <div>
            <div class="muted">Ready to download</div>
            <div style="font-size:18px;font-weight:800;margin-top:8px;" id="bigTitle">ParrotOS-1.0-desktop.iso</div>
            <div class="muted" style="margin-top:6px;">Architecture: x86 ¬∑ Size: ~450 KB (example)</div>
          </div>

          <div>
            <button class="downloadBtn" id="downloadBtn">Download ISO</button>

            <div class="progressWrap">
              <div class="progressBar" id="progressBar"><div class="bar" id="bar">0%</div></div>
            </div>
          </div>

          <div class="footerNote">Tip: After download you can burn the ISO to USB with Ventoy https://www.ventoy.net/en/download.html or use in a VM.</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const mainPage = document.getElementById('mainPage');
  const installOverlay = document.getElementById('installOverlay');
  const backBtn = document.getElementById('backBtn');
  const fullscreenBtn = document.getElementById('fullscreenBtn');

  const installTitle = document.getElementById('installTitle');
  const selVersion = document.getElementById('selVersion');
  const selType = document.getElementById('selType');
  const selDesc = document.getElementById('selDesc');
  const bigTitle = document.getElementById('bigTitle');
  const downloadBtn = document.getElementById('downloadBtn');
  const progressBar = document.getElementById('progressBar');
  const bar = document.getElementById('bar');

  let current = { version:'1.0', type:'POSK' };

  function showInstall(v,t){
    current.version=v; current.type=t;
    installTitle.textContent=`Installing ParrotOS ${v} (${t})`;
    selVersion.textContent=`ParrotOS ${v}`;
    selType.textContent=t;
    selDesc.textContent=(v==='alfa-0.1')?'Beta server build ‚Äî testing features.':'Stable desktop build ‚Äî recommended for most users.';
    bigTitle.textContent=`ParrotOS-${v}-${t}.iso`;
    installOverlay.classList.add('show');
    installOverlay.setAttribute('aria-hidden','false');
    progressBar.classList.remove('active');
    bar.style.width='0%'; bar.textContent='0%';
  }

  function hideInstall(){
    installOverlay.classList.remove('show');
    installOverlay.setAttribute('aria-hidden','true');
    bar.style.width='0%'; bar.textContent='0%';
    progressBar.classList.remove('active');
  }

  mainPage.querySelectorAll('.icon-card').forEach(card=>{
    card.addEventListener('click', ()=>{
      const v=card.dataset.version||'1.0';
      const t=card.dataset.type||'desktop';
      if(card.id==='testSystemBtn'){
        window.open('test_system.html','_blank');
      } else {
        showInstall(v,t);
      }
    });
    card.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' ') card.click(); });
  });

  backBtn.addEventListener('click', hideInstall);

  downloadBtn.addEventListener('click', ()=>{
    const filename=`ParrotOS-${current.version}-${current.type}.iso`;
    const url='data/'+filename;
    downloadBtn.disabled=true;
    progressBar.classList.add('active');
    let pct=0;
    const tick=setInterval(()=>{
      const delta=Math.max(1,Math.round((100-pct)*0.08));
      pct+=delta;
      if(pct>100) pct=100;
      bar.style.width=pct+'%';
      bar.textContent=(pct<100)?pct+'%':'Completed';
      if(pct>=100){
        clearInterval(tick);
        const a=document.createElement('a'); a.href=url; a.download=filename;
        document.body.appendChild(a); a.click(); document.body.removeChild(a);
        downloadBtn.disabled=false;
      }
    },120);
  });

  // fullscreen toggle
  fullscreenBtn.addEventListener('click', ()=>{
    document.querySelector('.frame').classList.toggle('fullscreen');
  });

})();
</script>
</body>
</html>
